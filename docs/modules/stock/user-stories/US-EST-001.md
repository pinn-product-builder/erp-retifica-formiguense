# US-EST-001: Cadastrar Cat√°logo de Pe√ßas

**ID:** US-EST-001  
**Epic:** Estoque  
**Sprint:** 6  
**Prioridade:** Cr√≠tica  
**Estimativa:** 5 pontos  
**Status:** Backlog  

---

## üìã User Story

**Como** gerente de estoque  
**Quero** cadastrar pe√ßas no cat√°logo com todas as especifica√ß√µes t√©cnicas  
**Para** manter controle organizado do invent√°rio de pe√ßas

---

## üéØ Business Objective

Criar cat√°logo completo e bem estruturado de pe√ßas, permitindo identifica√ß√£o √∫nica, categoriza√ß√£o e rastreamento eficiente.

---

## üìê Business Rules

### RN-EST-001: Estrutura da Pe√ßa
```typescript
interface Part {
  id: string;
  org_id: string;
  
  // Identifica√ß√£o
  code: string;                    // C√≥digo √∫nico da pe√ßa
  name: string;                    // Nome/descri√ß√£o
  description?: string;            // Descri√ß√£o detalhada
  
  // Categoriza√ß√£o
  category: PartCategory;          // Categoria principal
  component?: ComponentType;       // bloco, cabe√ßote, etc.
  subcategory?: string;           // Subcategoria
  
  // Especifica√ß√µes
  manufacturer?: string;           // Fabricante original
  oem_code?: string;              // C√≥digo OEM
  alternative_codes?: string[];   // C√≥digos alternativos
  
  // Medidas
  unit_of_measure: string;        // un, kg, m, l, etc.
  weight?: number;                // Peso unit√°rio
  dimensions?: {                  // Dimens√µes (LxWxH)
    length: number;
    width: number;
    height: number;
  };
  
  // Estoque
  current_stock: number;          // Saldo atual
  minimum_stock: number;          // Estoque m√≠nimo
  maximum_stock: number;          // Estoque m√°ximo
  reorder_point: number;          // Ponto de pedido
  economic_order_quantity: number; // Lote econ√¥mico
  
  // Financeiro
  average_cost: number;           // Custo m√©dio
  last_purchase_price?: number;   // √öltimo pre√ßo de compra
  selling_price?: number;         // Pre√ßo de venda
  
  // Localiza√ß√£o
  location: string;               // Localiza√ß√£o f√≠sica
  warehouse?: string;             // Almoxarifado
  shelf?: string;                 // Prateleira
  bin?: string;                   // Gaveta/bin
  
  // Fornecedores
  primary_supplier_id?: string;
  alternative_suppliers?: string[];
  
  // Status
  active: boolean;
  discontinued: boolean;
  
  // Metadados
  notes?: string;
  image_url?: string;
  created_by: string;
  created_at: Date;
  updated_at: Date;
}
```

### RN-EST-002: Categorias de Pe√ßas
```typescript
type PartCategory =
  | 'motor_parts'        // Pe√ßas de motor
  | 'bearings'           // Bronzinas e buchas
  | 'gaskets'            // Juntas e retentores
  | 'bolts_nuts'         // Parafusos e porcas
  | 'tools'              // Ferramentas
  | 'consumables'        // Consum√≠veis
  | 'lubricants'         // √ìleos e lubrificantes
  | 'chemicals'          // Produtos qu√≠micos
  | 'other';             // Outros

// Subcategorias por categoria principal
const subcategories = {
  motor_parts: ['Pist√£o', 'Anel', 'V√°lvula', 'Guia', 'Sede'],
  bearings: ['Bronzina de biela', 'Bronzina de mancal', 'Bucha'],
  gaskets: ['Junta de cabe√ßote', 'Retentor', 'Anel O-ring'],
  // ...
};
```

### RN-EST-003: C√≥digo da Pe√ßa
**Formato sugerido:** `{CATEGORIA}-{TIPO}-{SEQ}`

**Exemplos:**
- `MOT-PIST-0001` (Motor - Pist√£o - 001)
- `BRO-BIEL-0052` (Bronzina - Biela - 052)
- `JUN-CAB-0015` (Junta - Cabe√ßote - 015)

**Regras:**
- C√≥digo deve ser √∫nico na organiza√ß√£o
- Aceita c√≥digos customizados (n√£o obriga formato)
- Suporta c√≥digos OEM e alternativos
- Busca por qualquer c√≥digo (principal ou alternativo)

### RN-EST-004: Valida√ß√µes
- **C√≥digo**: Obrigat√≥rio e √∫nico
- **Nome**: M√≠nimo 3 caracteres
- **Categoria**: Obrigat√≥ria
- **Unidade de medida**: Obrigat√≥ria
- **Estoque m√≠nimo**: ‚â• 0
- **Estoque m√°ximo**: ‚â• estoque m√≠nimo
- **Custo m√©dio**: ‚â• 0

### RN-EST-005: Estoque Inicial
- Ao cadastrar pe√ßa, saldo inicia em zero
- Entrada inicial deve ser feita via movimenta√ß√£o
- N√£o permite entrada de saldo direto no cadastro

### RN-EST-006: Permiss√µes
- **Admin/Gerente**: CRUD completo
- **Almoxarife**: CRUD (exceto custos)
- **T√©cnico**: Apenas visualiza√ß√£o
- **Consultor**: Visualiza√ß√£o + verificar disponibilidade

---

## ‚úÖ Acceptance Criteria

**AC1:** Formul√°rio de cadastro com todos os campos especificados  
**AC2:** C√≥digo √© validado como √∫nico antes de salvar  
**AC3:** Categorias s√£o exibidas em select com subcategorias  
**AC4:** Upload de imagem da pe√ßa √© opcional  
**AC5:** Lista de pe√ßas mostra c√≥digo, nome, categoria e estoque atual  
**AC6:** Busca funciona por c√≥digo, nome ou c√≥digo alternativo  
**AC7:** Filtros por categoria e status (ativo/inativo) funcionam

---

## üõ†Ô∏è Definition of Done

- [ ] Tabela `parts` criada com todos os campos
- [ ] Componente `PartForm.tsx` implementado
- [ ] Hook `useParts.ts` criado
- [ ] Valida√ß√µes Zod implementadas
- [ ] Upload de imagem configurado
- [ ] Listagem com busca e filtros funcional
- [ ] RLS policies criadas
- [ ] Testes E2E escritos

---

## üìÅ Affected Components

```
src/components/stock/
  ‚îú‚îÄ‚îÄ PartForm.tsx                 (NEW)
  ‚îú‚îÄ‚îÄ PartList.tsx                 (NEW)
  ‚îî‚îÄ‚îÄ PartFilters.tsx              (NEW)

src/pages/
  ‚îî‚îÄ‚îÄ Estoque.tsx                  (NEW)

src/hooks/
  ‚îî‚îÄ‚îÄ useParts.ts                  (NEW)
```

---

## üóÑÔ∏è Database Schema

```sql
-- Tabela principal de pe√ßas
CREATE TABLE parts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  org_id UUID REFERENCES organizations(id) NOT NULL,
  
  -- Identifica√ß√£o
  code TEXT NOT NULL,
  name TEXT NOT NULL,
  description TEXT,
  
  -- Categoriza√ß√£o
  category TEXT NOT NULL CHECK (category IN (
    'motor_parts', 'bearings', 'gaskets', 'bolts_nuts',
    'tools', 'consumables', 'lubricants', 'chemicals', 'other'
  )),
  component TEXT CHECK (component IN (
    'bloco', 'cabecote', 'virabrequim', 'biela',
    'pistao', 'comando', 'eixo'
  )),
  subcategory TEXT,
  
  -- Especifica√ß√µes
  manufacturer TEXT,
  oem_code TEXT,
  alternative_codes TEXT[],
  
  -- Medidas
  unit_of_measure TEXT NOT NULL DEFAULT 'un',
  weight NUMERIC(10,3),
  dimensions JSONB,  -- {length, width, height}
  
  -- Estoque
  current_stock NUMERIC(10,3) DEFAULT 0 CHECK (current_stock >= 0),
  minimum_stock NUMERIC(10,3) DEFAULT 0 CHECK (minimum_stock >= 0),
  maximum_stock NUMERIC(10,3) CHECK (maximum_stock >= minimum_stock),
  reorder_point NUMERIC(10,3) DEFAULT 0,
  economic_order_quantity NUMERIC(10,3),
  
  -- Financeiro
  average_cost NUMERIC(10,2) DEFAULT 0 CHECK (average_cost >= 0),
  last_purchase_price NUMERIC(10,2),
  selling_price NUMERIC(10,2),
  
  -- Localiza√ß√£o
  location TEXT,
  warehouse TEXT,
  shelf TEXT,
  bin TEXT,
  
  -- Fornecedores
  primary_supplier_id UUID REFERENCES suppliers(id),
  alternative_suppliers UUID[],
  
  -- Status
  active BOOLEAN DEFAULT true,
  discontinued BOOLEAN DEFAULT false,
  
  -- Metadados
  notes TEXT,
  image_url TEXT,
  created_by UUID REFERENCES profiles(id),
  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now(),
  
  -- Constraints
  UNIQUE(org_id, code)
);

-- √çndices para performance
CREATE INDEX idx_parts_org ON parts(org_id);
CREATE INDEX idx_parts_code ON parts(code);
CREATE INDEX idx_parts_category ON parts(category);
CREATE INDEX idx_parts_component ON parts(component);
CREATE INDEX idx_parts_active ON parts(active);
CREATE INDEX idx_parts_stock ON parts(current_stock);

-- √çndice GIN para busca em arrays (c√≥digos alternativos)
CREATE INDEX idx_parts_alternative_codes ON parts USING GIN(alternative_codes);

-- √çndice para busca full-text
CREATE INDEX idx_parts_search ON parts USING GIN(
  to_tsvector('portuguese', name || ' ' || COALESCE(description, ''))
);

-- RLS Policies
ALTER TABLE parts ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view parts of their org"
  ON parts FOR SELECT
  USING (org_id = (SELECT org_id FROM profiles WHERE id = auth.uid()));

CREATE POLICY "Managers can create parts"
  ON parts FOR INSERT
  WITH CHECK (
    org_id = (SELECT org_id FROM profiles WHERE id = auth.uid())
    AND EXISTS (
      SELECT 1 FROM profiles
      WHERE id = auth.uid()
      AND role IN ('admin', 'gerente', 'almoxarife')
    )
  );

CREATE POLICY "Managers can update parts"
  ON parts FOR UPDATE
  USING (
    org_id = (SELECT org_id FROM profiles WHERE id = auth.uid())
    AND EXISTS (
      SELECT 1 FROM profiles
      WHERE id = auth.uid()
      AND role IN ('admin', 'gerente', 'almoxarife')
    )
  );

CREATE POLICY "Admins can delete parts"
  ON parts FOR DELETE
  USING (
    org_id = (SELECT org_id FROM profiles WHERE id = auth.uid())
    AND EXISTS (
      SELECT 1 FROM profiles
      WHERE id = auth.uid()
      AND role = 'admin'
    )
  );

-- Trigger para updated_at
CREATE TRIGGER trg_update_parts_timestamp
  BEFORE UPDATE ON parts
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();

-- View para pe√ßas com estoque baixo
CREATE OR REPLACE VIEW parts_low_stock AS
SELECT 
  p.*,
  (p.minimum_stock - p.current_stock) AS quantity_needed,
  CASE 
    WHEN p.current_stock = 0 THEN 'out_of_stock'
    WHEN p.current_stock <= p.reorder_point THEN 'critical'
    WHEN p.current_stock <= p.minimum_stock THEN 'low'
    ELSE 'ok'
  END AS stock_status
FROM parts p
WHERE p.active = true
AND p.current_stock <= p.minimum_stock
ORDER BY (p.minimum_stock - p.current_stock) DESC;

-- Permiss√µes na view
GRANT SELECT ON parts_low_stock TO authenticated;
```

---

## üé® Wireframe

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üì¶ Estoque - Cat√°logo de Pe√ßas              [+ Nova Pe√ßa]  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                               ‚îÇ
‚îÇ  Buscar: [üîç C√≥digo, nome ou descri√ß√£o_________________]     ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Filtros:                                                     ‚îÇ
‚îÇ  Categoria: [Todas ‚ñº]  Componente: [Todos ‚ñº]  Status: [‚úì]   ‚îÇ
‚îÇ  Estoque: [ ] Apenas com estoque baixo                       ‚îÇ
‚îÇ                                              [üì• Exportar]   ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ C√≥digo    ‚îÇ Nome              ‚îÇ Categoria ‚îÇ Estoque     ‚îÇ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚îÇ
‚îÇ  ‚îÇ MOT-PIST  ‚îÇ Pist√£o 86mm      ‚îÇ Pe√ßas     ‚îÇ 15 un       ‚îÇ‚îÇ
‚îÇ  ‚îÇ -0001     ‚îÇ Mercedes OM 906   ‚îÇ Motor     ‚îÇ ‚ö†Ô∏è Baixo   ‚îÇ‚îÇ
‚îÇ  ‚îÇ           ‚îÇ [‚úèÔ∏è Editar] [üëÅÔ∏è Ver]                       ‚îÇ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚îÇ
‚îÇ  ‚îÇ BRO-BIEL  ‚îÇ Bronzina biela   ‚îÇ Bronzinas ‚îÇ 8 un        ‚îÇ‚îÇ
‚îÇ  ‚îÇ -0052     ‚îÇ 0.50mm STD        ‚îÇ           ‚îÇ üî¥ Cr√≠tico ‚îÇ‚îÇ
‚îÇ  ‚îÇ           ‚îÇ [‚úèÔ∏è Editar] [üëÅÔ∏è Ver]                       ‚îÇ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚îÇ
‚îÇ  ‚îÇ JUN-CAB   ‚îÇ Junta cabe√ßote   ‚îÇ Juntas    ‚îÇ 25 un       ‚îÇ‚îÇ
‚îÇ  ‚îÇ -0015     ‚îÇ OM 906            ‚îÇ           ‚îÇ ‚úÖ Ok       ‚îÇ‚îÇ
‚îÇ  ‚îÇ           ‚îÇ [‚úèÔ∏è Editar] [üëÅÔ∏è Ver]                       ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Mostrando 3 de 127 pe√ßas       [< 1 2 3 4 5 >]             ‚îÇ
‚îÇ                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Cadastrar Nova Pe√ßa                                    [X]  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                               ‚îÇ
‚îÇ  IDENTIFICA√á√ÉO                                                ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ  C√≥digo da Pe√ßa: *                                           ‚îÇ
‚îÇ  [MOT-PIST-0001__________________]                           ‚îÇ
‚îÇ  ‚ÑπÔ∏è C√≥digo √∫nico da pe√ßa no sistema                         ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Nome da Pe√ßa: *                                             ‚îÇ
‚îÇ  [Pist√£o 86mm Mercedes OM 906____]                           ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Descri√ß√£o (opcional):                                       ‚îÇ
‚îÇ  [Pist√£o completo com pino e travas, medida STD 86mm       ]‚îÇ
‚îÇ  [para motores Mercedes OM 906                              ]‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  CATEGORIZA√á√ÉO                                                ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ  Categoria: *                    Subcategoria:               ‚îÇ
‚îÇ  [Pe√ßas de Motor ‚ñº]              [Pist√£o ‚ñº]                  ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Componente Relacionado:                                     ‚îÇ
‚îÇ  [Bloco ‚ñº]                                                    ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  ESPECIFICA√á√ïES                                               ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ  Fabricante:                     C√≥digo OEM:                 ‚îÇ
‚îÇ  [Mahle______________]           [22855900________]          ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  C√≥digos Alternativos (separados por v√≠rgula):              ‚îÇ
‚îÇ  [A4570310101, 906-030-03-17_____]                           ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Unidade de Medida: *                                        ‚îÇ
‚îÇ  (‚Ä¢) Unidade (un)  [ ] Quilograma (kg)  [ ] Metro (m)       ‚îÇ
‚îÇ  [ ] Litro (l)     [ ] Outro: [________]                     ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  CONTROLE DE ESTOQUE                                          ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ  Estoque M√≠nimo: *      Estoque M√°ximo:    Ponto de Pedido: ‚îÇ
‚îÇ  [10__] un              [50__] un          [15__] un         ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Lote Econ√¥mico de Compra:                                   ‚îÇ
‚îÇ  [20__] un                                                    ‚îÇ
‚îÇ  ‚ÑπÔ∏è Quantidade ideal para cada pedido de compra              ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  FINANCEIRO                                                   ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ  Custo M√©dio:           Pre√ßo de Venda (sugerido):          ‚îÇ
‚îÇ  [R$ 0,00_]             [R$ 0,00_________]                   ‚îÇ
‚îÇ  (Ser√° calculado automaticamente com as compras)             ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  LOCALIZA√á√ÉO F√çSICA                                           ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ  Almoxarifado:          Prateleira:        Gaveta/Bin:       ‚îÇ
‚îÇ  [Principal ‚ñº]          [A3__]             [15__]            ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Localiza√ß√£o Completa:                                       ‚îÇ
‚îÇ  [Principal - A3 - 15____]                                    ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  FORNECEDORES                                                 ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ  Fornecedor Principal:                                       ‚îÇ
‚îÇ  [Auto Pe√ßas ABC Ltda ‚ñº]         [+ Novo Fornecedor]        ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Fornecedores Alternativos:                                  ‚îÇ
‚îÇ  [‚òë Ret√≠fica XYZ]  [‚òë Diesel Parts]  [ ] Motor Service      ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  IMAGEM DA PE√áA (opcional)                                    ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ  üì∑ Arraste uma imagem ou clique para selecionar        ‚îÇ‚îÇ
‚îÇ  ‚îÇ                                                          ‚îÇ‚îÇ
‚îÇ  ‚îÇ  Formatos: JPG, PNG | Tamanho m√°ximo: 2 MB              ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Observa√ß√µes (opcional):                                     ‚îÇ
‚îÇ  [____________________________________________________________]‚îÇ
‚îÇ  [Verificar compatibilidade com outros modelos OM 924/926   ]‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  Status:                                                      ‚îÇ
‚îÇ  [‚úì] Ativo      [ ] Descontinuado                            ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ                            [Cancelar]  [üíæ Salvar Pe√ßa]      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üß™ Test Scenarios

### E2E Test 1: Cadastrar Pe√ßa Completa
```gherkin
Given que estou na tela de cadastro de pe√ßas
When preencho todos os campos obrigat√≥rios
And seleciono categoria "Pe√ßas de Motor"
And defino estoque m√≠nimo "10" e m√°ximo "50"
And clico em "Salvar Pe√ßa"
Then pe√ßa √© criada com sucesso
And c√≥digo √© √∫nico no sistema
And saldo inicial √© zero
And aparece na listagem
```

### E2E Test 2: Valida√ß√£o de C√≥digo Duplicado
```gherkin
Given que j√° existe pe√ßa com c√≥digo "MOT-PIST-0001"
When tento cadastrar nova pe√ßa com mesmo c√≥digo
And clico em "Salvar"
Then erro de valida√ß√£o aparece
And mensagem: "C√≥digo j√° existe no sistema"
And pe√ßa n√£o √© salva
```

### E2E Test 3: Buscar Pe√ßa por C√≥digo Alternativo
```gherkin
Given que pe√ßa "MOT-PIST-0001" tem c√≥digo alternativo "A4570310101"
When busco por "A4570310101"
Then pe√ßa "MOT-PIST-0001" aparece nos resultados
```

### E2E Test 4: Filtrar por Estoque Baixo
```gherkin
Given que tenho pe√ßas com estoque acima e abaixo do m√≠nimo
When marco filtro "Apenas com estoque baixo"
And aplico filtros
Then apenas pe√ßas com current_stock <= minimum_stock aparecem
And badge de alerta √© exibido
```

### E2E Test 5: Upload de Imagem
```gherkin
Given que estou cadastrando pe√ßa
When fa√ßo upload de imagem v√°lida (JPG, 1.5MB)
Then imagem √© enviada para Supabase Storage
And URL √© salva no campo image_url
And thumbnail aparece no formul√°rio
```

### E2E Test 6: Valida√ß√£o de Estoque M√°ximo
```gherkin
Given que defino estoque m√≠nimo "20"
When tento definir estoque m√°ximo "10"
And tento salvar
Then erro de valida√ß√£o aparece
And mensagem: "Estoque m√°ximo deve ser maior que o m√≠nimo"
```

### E2E Test 7: Editar Pe√ßa Existente
```gherkin
Given que tenho pe√ßa cadastrada
When clico em "Editar"
And altero nome e categoria
And salvo altera√ß√µes
Then pe√ßa √© atualizada
And updated_at √© atualizado
And hist√≥rico registra altera√ß√£o
```

---

## üö´ Negative Scope

**N√£o inclui:**
- Gest√£o de lotes (FIFO/FEFO)
- Controle de validade
- Rastreamento por n√∫mero de s√©rie
- Importa√ß√£o em massa de pe√ßas (CSV)
- Integra√ß√£o com cat√°logos externos

---

## üîó Dependencies

**Blocks:**
- US-EST-002 (Controlar Saldo)
- US-EST-003 (Movimenta√ß√µes)
- Todas as outras US de estoque

**Blocked by:**
- Nenhuma

**Related:**
- US-COMP-001 (Cadastrar Fornecedores)

---

**√öltima atualiza√ß√£o:** 2025-01-27  
**Vers√£o:** 1.0
